<svg viewBox="0 0 900 680" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="900" height="680" fill="#f5f5f5" />
  
  <!-- Title -->
  <text x="450" y="30" font-family="Arial" font-size="20" font-weight="bold" text-anchor="middle">Data Tier Architecture: Dual-Database System</text>
  
  <!-- Application Layer -->
  <rect x="250" y="80" width="400" height="80" rx="5" fill="#e1f5fe" stroke="#01579b" stroke-width="2" />
  <text x="450" y="110" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Application Layer</text>
  <text x="450" y="140" font-family="Arial" font-size="14" text-anchor="middle">Business Logic &amp; Services</text>
  
  <!-- Repository Interface Layer -->
  <rect x="250" y="180" width="400" height="60" rx="5" fill="#e8f5e9" stroke="#2e7d32" stroke-width="2" />
  <text x="450" y="215" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Repository Interfaces Layer</text>
  
  <!-- Repository Factory Layer -->
  <rect x="250" y="260" width="400" height="60" rx="5" fill="#fff3e0" stroke="#e65100" stroke-width="2" />
  <text x="450" y="295" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Repository Factory &amp; Feature Flags</text>
  
  <!-- Implementation Layer -->
  <rect x="50" y="340" width="350" height="120" rx="5" fill="#e1bee7" stroke="#6a1b9a" stroke-width="2" />
  <text x="225" y="365" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">PostgreSQL Implementation</text>
  <text x="225" y="390" font-family="Arial" font-size="14" text-anchor="middle">- Development &amp; Testing Environment</text>
  <text x="225" y="415" font-family="Arial" font-size="14" text-anchor="middle">- ACID Transactions</text>
  <text x="225" y="440" font-family="Arial" font-size="14" text-anchor="middle">- SQL Query Support</text>
  
  <rect x="500" y="340" width="350" height="120" rx="5" fill="#d1c4e9" stroke="#4527a0" stroke-width="2" />
  <text x="675" y="365" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Iceberg Implementation</text>
  <text x="675" y="390" font-family="Arial" font-size="14" text-anchor="middle">- Production Environment</text>
  <text x="675" y="415" font-family="Arial" font-size="14" text-anchor="middle">- Schema Evolution Support</text>
  <text x="675" y="440" font-family="Arial" font-size="14" text-anchor="middle">- Time Travel &amp; Partitioning</text>
  
  <!-- Storage Layer -->
  <rect x="50" y="480" width="350" height="80" rx="5" fill="#ffecb3" stroke="#ff6f00" stroke-width="2" />
  <text x="225" y="515" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">PostgreSQL Database</text>
  <text x="225" y="540" font-family="Arial" font-size="14" text-anchor="middle">- Azure PostgreSQL Flexible Server</text>
  
  <rect x="500" y="480" width="350" height="80" rx="5" fill="#bbdefb" stroke="#0d47a1" stroke-width="2" />
  <text x="675" y="515" font-family="Arial" font-size="16" font-weight="bold" text-anchor="middle">Apache Iceberg on ADLS</text>
  <text x="675" y="540" font-family="Arial" font-size="14" text-anchor="middle">- Azure Data Lake Storage Gen2</text>
  
  <!-- Deployment Environments -->
  <rect x="50" y="580" width="200" height="60" rx="5" fill="#dcedc8" stroke="#33691e" stroke-width="2" />
  <text x="150" y="610" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Dev Environment (WSL)</text>
  <text x="150" y="630" font-family="Arial" font-size="12" text-anchor="middle">Docker Compose</text>
  
  <rect x="350" y="580" width="200" height="60" rx="5" fill="#ffcdd2" stroke="#b71c1c" stroke-width="2" />
  <text x="450" y="610" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">SIT Environment (Azure)</text>
  <text x="450" y="630" font-family="Arial" font-size="12" text-anchor="middle">Container Apps</text>
  
  <rect x="650" y="580" width="200" height="60" rx="5" fill="#b3e5fc" stroke="#0288d1" stroke-width="2" />
  <text x="750" y="610" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">UAT Environment (Azure)</text>
  <text x="750" y="630" font-family="Arial" font-size="12" text-anchor="middle">Kubernetes Service (AKS)</text>
  
  <!-- Connection Lines -->
  <!-- App to Repos -->
  <path d="M450 160 V180" fill="none" stroke="#666" stroke-width="2" />
  <polygon points="450,180 445,170 455,170" fill="#666" />
  
  <!-- Repos to Factory -->
  <path d="M450 240 V260" fill="none" stroke="#666" stroke-width="2" />
  <polygon points="450,260 445,250 455,250" fill="#666" />
  
  <!-- Factory to Impls -->
  <path d="M450 320 L225 340" fill="none" stroke="#666" stroke-width="2" />
  <polygon points="225,340 230,330 235,335" fill="#666" />
  
  <path d="M450 320 L675 340" fill="none" stroke="#666" stroke-width="2" />
  <polygon points="675,340 670,330 665,335" fill="#666" />
  
  <!-- Impls to Storage -->
  <path d="M225 460 V480" fill="none" stroke="#666" stroke-width="2" />
  <polygon points="225,480 220,470 230,470" fill="#666" />
  
  <path d="M675 460 V480" fill="none" stroke="#666" stroke-width="2" />
  <polygon points="675,480 670,470 680,470" fill="#666" />
  
  <!-- Storage to Environments -->
  <path d="M225 560 L150 580" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5" />
  <polygon points="150,580 155,570 160,575" fill="#666" />
  
  <path d="M225 560 L450 580" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5" />
  <polygon points="450,580 445,570 440,575" fill="#666" />
  
  <path d="M675 560 L750 580" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5" />
  <polygon points="750,580 745,570 740,575" fill="#666" />
  
  <!-- Schema Sync -->
  <path d="M350 400 L500 400" fill="none" stroke="#666" stroke-width="2" stroke-dasharray="5,5" />
  <text x="425" y="390" font-family="Arial" font-size="12" text-anchor="middle">Schema Sync</text>
  <polygon points="500,400 490,395 490,405" fill="#666" />
  <polygon points="350,400 360,395 360,405" fill="#666" />
  
  <!-- Feature Toggle -->
  <rect x="375" y="320" width="150" height="25" rx="12" fill="white" stroke="#666" stroke-width="1" />
  <text x="450" y="337" font-family="Arial" font-size="12" text-anchor="middle">Feature Toggle</text>
</svg>